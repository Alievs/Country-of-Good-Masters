{% extends 'base.html.twig' %}

    {% block stylesheets %}
        {{ parent() }}
        <link rel="stylesheet" href="{{ asset('css/product.css') }}">
    {% endblock %}

{% block body %}
    <div class="product-product container">
        <ul class="breadcrumb my-4">
            <li><a href="{{ path('homepage') }}"><i class="fas fa-home"></i></a> »<li>
            <li><a href="{{ path('categories', {name: product.category.name}) }}" class="px-2">{{ product.category.name }}</a>»<li>
            <li class="px-2">{{ product.name }}<li>
        </ul>
        <div class="row">
            <div id="content" class="col-sm-12">
                <div class="row">
                    <div class="col-sm-6 col-lg-7 product_page-left">
                        <div class="product-gallery">
                                <div class="row px-3">
                                    <div id="carouselExampleIndicators" class="carousel my-4" data-ride="carousel">
                                        <ol class="carousel-indicators">
                                            <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
                                            {% if product.images|length > 0 %}
                                                {% set i = 1 %}{% for i in i..product.images|length %}
                                                    <li data-target="#carouselExampleIndicators" data-slide-to="{{ i }}"></li>
                                                {% endfor %}
                                            {% endif %}
                                        </ol>
                                        <div class="carousel-inner" role="listbox">
                                            <div class="carousel-item active">
                                                <img class="d-block img-fluid img-full" src="{{ asset(product.mainImage| product_image_path | imagine_filter('thumb_product_info')) }}">
                                            </div>
                                            {% for img in product.images %}
                                                <div class="carousel-item">
                                                    <img class="d-block img-fluid" src="{{ asset(img.imageName| product_image_path  | imagine_filter('thumb_product_info')) }}">
                                                </div>
                                            {% endfor %}
                                        </div>
                                        <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                            <span class="sr-only">Previous</span>
                                        </a>
                                        <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                            <span class="sr-only">Next</span>
                                        </a>
                                        <div class="cart-button d-none d-lg-block">
                                            {% if app.session.has('wish') %}
                                                {% if product.id in app.session.get('wish').items|keys %}
                                                    {% set btn_wish = 'active js-wish' %}
                                                {% else %}
                                                    {% set btn_wish = 'js-wish-product' %}
                                                {% endif %}
                                            {% else %}
                                                {% set btn_wish = 'js-wish-product' %}
                                            {% endif %}

                                            {% if app.session.has('compare') %}
                                                {% if product.id in app.session.get('compare').items|keys %}
                                                    {% set btn_comp = 'active js-comp' %}
                                                {% else %}
                                                    {% set btn_comp = 'js-compare-product' %}
                                                {% endif %}
                                            {% else %}
                                                {% set btn_comp = 'js-compare-product' %}
                                            {% endif %}

                                            {% if app.session.has('cart') %}
                                                {% if product.id in app.session.get('cart').products|keys %}
                                                    {% set btn_cart = 'active js-cart' %}
                                                {% else %}
                                                    {% set btn_cart = 'js-add-product' %}
                                                {% endif %}
                                            {% else %}
                                                {% set btn_cart = 'js-add-product' %}
                                            {% endif %}
                                            <button class="btn-icon {{ btn_wish }}"
                                                    data-url="{{ path('wish_add', {id: product.id}) }}"><i class="fas fa-heart"></i></button>
                                            <button class="btn-icon {{ btn_comp }}"
                                                    data-url="{{ path('compare_add', {id: product.id}) }}"><i class="fas fa-balance-scale"></i></button>
                                        </div>
                                    </div>
                                </div>
                        </div>
                    </div>
                    <div class="col-sm-6 col-lg-5 product_page-right">
                        <div class="general_info product-info">
                            <h2 class="product-title">{{product.name}}</h2>
                            <!-- Prodyuct rating status -->
                            <ul class="list-unstyled product-section">

                                <li class="mb-2"><strong>Brand:</strong>
                                    <a href="#">{{product.brand}}</a>
                                </li>

                                <li class="mb-2">
                                    <strong>Country:</strong>
                                    <a href="#">{{product.country}}</a>
                                </li>

                                <li class="mb-2">
                                    <strong>Warranty:</strong>
                                    <span>{{product.warranty}}</span>
                                </li>

                                <li class="mb-2">
                                    <strong>Availability:</strong>
                                    <span class="stock">In Stock</span>
                                    {#<span class="{{stock_status <= 0 ? 'out-stock' : 'stock'}}">In Stock</span>#}
                                </li>
                            </ul>
                            <div class="rating-section product-rating-status">
                                    <div class="rating">
                                        {% for i in 1..5 %}
                                            <i class="far fa-star"></i>
                                        {% endfor %}
                                        {#<span class="fa fa-stack"><i class="material-icons-star star fa-stack-1x"></i></span>#}
                                        <span class="review-link review-link-show">
									<a href="#">Comments</a>
								</span>
                                        <span class="review-link review-link-write">
									<a href="#">Add your comment</a>
								</span>
                                    </div>
                            </div>
                        </div>
                        <div id="product">
                            <!-- Add to cart form -->
                            {#<div class="form-group form-horizontal">#}
                                {#<div class="form-group">#}
                                    {#<div class="col-sm-12">#}
                                        {#<div class="quantity">#}
                                        {#</div>#}
                                    {#</div>#}
                                {#</div>#}
                            {#</div>#}
                                <div class="price-section my-4">
                                    {#{% if (not special) %}#}
                                        {#<span class="price-new">{{price}}</span>#}
                                    {#{% else %}#}
                                        {#<span class="price-old">{{price}}</span>#}
                                    {#{% endif %}#}
                                    <span class="price-old">$10000</span>
                                    <span class="price-new">${{product.unitprice}}</span>
                                </div>
                            <button type="submit" id="button-cart" class="btn-primary {{ btn_cart }}"
                                    data-url="{{ path('cart_add', {id: product.id}) }}"><i class="fas fa-shopping-cart"></i><span class="px-2">Add to cart</span></button>
                            <div class="d-lg-none d-xl-none cart-button">
                                <a class="product-btn {{ btn_wish }}"
                                   type="button" data-url="{{ path('wish_add', {id: product.id}) }}"><i class="fas fa-heart"></i><span>Wish List</span></a>
                                <a class="product-btn {{ btn_comp }}"
                                   type="button" data-url="{{ path('compare_add', {id: product.id}) }}"><i class="fas fa-balance-scale"></i><span>Compare Product</span></a>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="product_tabs" data-url="{{ path('wish_add', {id: product.id}) }}">
                    <ul class="nav nav-tabs">
                        <li>
                            <a href="#tab-description" data-toggle="tab">Description</a>
                        </li>
                        <li>
                            <a href="#tab-specification" data-toggle="tab">Additional Info</a>
                        </li>
                        <li>
                            <a href="#tab-review" data-toggle="tab">Comments</a>
                        </li>
                        <li>
                            <a href="#tab-video" data-toggle="tab">Video</a>
                        </li>
                    </ul>
                    <div class="tab-content">
                        <div class="tab-pane active" id="tab-description">
                            {{product.description}}
                        </div>
                        <div class="tab-pane product-spec product-section" id="tab-specification">
                            <table class="table table-bordered">
                                    <tbody>
                                    <tr>
                                        <td class="leftcol"><span>Ширина</span></td>
                                        <td class="rightcol"><span>{{ product.width }} см</span></td>
                                    </tr>
                                    <tr>
                                        <td><span>Висота</span></td>
                                        <td><span>{{ product.height }} см</span></td>
                                    </tr>
                                    <tr>
                                        <td><span>Глибина</span></td>
                                        <td><span>{{ product.depth }} см</span></td>
                                    </tr>
                                    <tr>
                                        <td><span>Матеріал</span></td>
                                        <td><span>{{ product.material }}</span></td>
                                    </tr>

                                    {% if (product.productInfo.berthWidth ?? null) is not null %}
                                    <tr>
                                        <td><span>Ширина спального місця</span></td>
                                        <td><span>{{ product.productInfo.berthWidth }} см</span></td>
                                    </tr>
                                    {% endif %}
                                    {% if (product.productInfo.berthDepth ?? null) is not null %}
                                        <tr>
                                            <td><span>Глибина спального місця</span></td>
                                            <td><span>{{ product.productInfo.berthDepth }} см</span></td>
                                        </tr>
                                    {% endif %}
                                    {% if (product.productInfo.sofaType ?? null) is not null %}
                                        <tr>
                                            <td><span>Вид дивану</span></td>
                                            <td><span>{{ product.productInfo.sofaType }}</span></td>
                                        </tr>
                                    {% endif %}
                                    {% if (product.productInfo.internalFilling ?? null) is not null %}
                                        <tr>
                                            <td><span>Состав наполнения</span></td>
                                            <td><span>{{ product.productInfo.internalFilling }}</span></td>
                                        </tr>
                                    {% endif %}
                                    {% if (product.productInfo.sleepingPlaces ?? null) is not null %}
                                        <tr>
                                            <td><span>Кількість спальних місць</span></td>
                                            <td><span>{{ product.productInfo.sleepingPlaces }}</span></td>
                                        </tr>
                                    {% endif %}
                                    {% if (product.productInfo.frameMaterial ?? null) is not null %}
                                        <tr>
                                            <td><span>Матеріал рами</span></td>
                                            <td><span>{{ product.productInfo.frameMaterial }}</span></td>
                                        </tr>
                                    {% endif %}
                                    {% if (product.productInfo.color ?? null) is not null %}
                                        <tr>
                                            <td><span>Колір</span></td>
                                            <td><span>{{ product.productInfo.color }}</span></td>
                                        </tr>
                                    {% endif %}
                                    {% if (product.productInfo.pillows ?? null) is not null %}
                                        <tr>
                                            <td><span>Наявність подушок</span></td>
                                            <td><span>{{ product.productInfo.pillows }}</span></td>
                                        </tr>
                                    {% endif %}
                                    {% if (product.productInfo.weight ?? null) is not null %}
                                        <tr>
                                            <td><span>Вага</span></td>
                                            <td><span>{{ product.productInfo.weight }} кг</span></td>
                                        </tr>
                                    {% endif %}
                                    </tbody>
                            </table>
                        </div>
                        <div class="tab-pane product-reviews" id="tab-review">
                            <form class="form-horizontal" id="form-review">

                                <div class="rating"><span>Overall Rating 0</span>
                                    {% set i = 1 %}{% for i in i..5 %}
                                        <i class="far fa-star"></i>
                                        {#{% if (rating < i) %}#}
                                            {#<span class="fa-stack"><i class="material-icons-star fa-stack-1x"></i></span>#}
                                        {#{% else %}#}
                                            {#<span class="fa-stack"><i class="material-icons-star star fa-stack-1x"></i></span>#}
                                        {#{% endif %}#}
                                    {% endfor %}
                                </div>
                                <!-- Comments -->
                                <div id="review"></div>
                                <div class="review-form-title">
                                    <span class="btn-primary" id="reviews_form_title">Write a comment</span>
                                </div>
                                {#<div class="product-review-form" id="reviews_form">#}
                                    {#{% if (review_guest) %}#}
                                        {#<div class="form-group required">#}
                                            {#<div class="col-sm-12">#}
                                                {#<label class="control-label" for="input-name">{{entry_name}}</label>#}
                                                {#<input type="text" name="name" value="{{customer_name}}" id="input-name" class="form-control" />#}
                                            {#</div>#}
                                        {#</div>#}
                                        {#<div class="form-group required">#}
                                            {#<div class="col-sm-12">#}
                                                {#<label class="control-label" for="input-review">{{entry_review}}</label>#}
                                                {#<textarea name="text" rows="5" id="input-review" class="form-control"></textarea>#}
                                                {#<div class="help-block">{{text_note}}</div>#}
                                            {#</div>#}
                                        {#</div>#}
                                        {#<div class="form-group required">#}
                                            {#<div class="col-sm-12">#}
                                                {#<label class="control-label">{{entry_rating}}</label>#}
                                                {#&nbsp;&nbsp;&nbsp; {{entry_bad}}&nbsp;#}
                                                {#<input type="radio" name="rating" value="1" />#}
                                                {#&nbsp;#}
                                                {#<input type="radio" name="rating" value="2" />#}
                                                {#&nbsp;#}
                                                {#<input type="radio" name="rating" value="3" />#}
                                                {#&nbsp;#}
                                                {#<input type="radio" name="rating" value="4" />#}
                                                {#&nbsp;#}
                                                {#<input type="radio" name="rating" value="5" />#}
                                                {#&nbsp;{{entry_good}}#}
                                            {#</div>#}
                                        {#</div>#}
                                        {#{{captcha}}#}
                                        {#<div class="buttons clearfix">#}
                                            {#<div class="pull-right">#}
                                                {#<button type="button" id="button-review" data-loading-text="{{text_loading}}" class="btn btn-primary">#}
                                                    {#{{button_continue}}#}
                                                {#</button>#}
                                            {#</div>#}
                                        {#</div>#}
                                    {#{% else %}#}
                                        {#{{text_login}}#}
                                    {#{% endif %}#}
                                {#</div>#}
                            </form>
                        </div>
                        <div id="tab-video" class="tab-pane product-video product-section">
                            <div class="r_frame">
                                video
                            </div>
                            <div class="clearfix"></div>
                        </div>
                    </div>
                </div>
                <!-- related Products -->
                <div class="related-block">
                        <div class="box-heading">
                            <h3>RELATED PRODUCTS (Soon)</h3>
                        </div>
                </div>

            </div>
        </div>
    </div>
{% endblock %}
