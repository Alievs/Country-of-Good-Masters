{% for message in app.flashes('info') %}
    <div class="help-inline2">
        {{ message }}
    </div>
{% endfor %}

{% if app.session.has('wish') %}
    <div class="user-container">
        <div class="compare-head">
            <h2>Товари в бажаному</h2>
        </div>

        <div class="btn-sup">
            <button class="btn-clear js-wish-clear" data-url="{{ path('wish_clear') }}">
                <i class="fas fa-trash-alt"></i>
                Очистити список
            </button>

            <a class="btn-back" href="{{ path('catalog') }}"><span>Продовжити покупки</span></a>
        </div>
        <div class="wish-products">
            {% for product in products %}
                <div class="card">

                    <div class="product-img">
                        <div class="card-block">

                            {% if app.session.has('compare') %}
                                {% if product['item'].id in app.session.get('compare').items|keys %}
                                    {% set card_btn_comp = 'active js-comp' %}
                                {% else %}
                                    {% set card_btn_comp = 'js-compare-product' %}
                                {% endif %}
                            {% else %}
                                {% set card_btn_comp = 'js-compare-product' %}
                            {% endif %}
                            <button class="btn-remove js-wish-remove"
                                    data-url="{{ path('wish_remove', {id: product['item'].id}) }}">
                                <i class="fas fa-times"></i>
                            </button>
                            <button class="compare {{ card_btn_comp }}"
                                    data-url="{{ path('compare_add', {id: product['item'].id}) }}">
                                <i class="fas fa-balance-scale"></i>
                            </button>
                        </div>
                        <a href="{{ path('product', {name: product['category'], link: product['item'].link, id: product['item'].id}) }}">
                            <img class="card-img"
                                 src="{{ asset(product['item'].mainImage| assets_image_path | imagine_filter('cart_univers2')) }}"
                                 alt="{{ product['item'].mainImage }}">
                        </a>
                    </div>
                    <div class="card-body">
                        <div class="card-comment">
                            <a href="#">
                                <span>отсавить отзыв</span>
                                <i class="far fa-comment"></i>
                            </a>
                        </div>
                        <h3 class="card-title">
                            <a href="{{ path('product', {name: product['category'], link: product['item'].link, id: product['item'].id}) }}">
                                <strong>{{ product['item'].name }}</strong>
                            </a>
                        </h3>
                        {% if product['item'].discount is not empty %}
                            <div class="card-old-price">
                                <s>{{ product['item'].unitPrice }} ₴</s>
                            </div>
                            <div class="card-price-discount">
                                <span>{{ (product['item'].unitPrice * (100 - product['item'].discount)/100)|round(0, 'floor') }}</span>
                                <span>₴</span>
                            </div>
                        {% else %}
                            <div class="card-price">
                                <span>{{ product['item'].unitPrice }}</span>
                                <span>₴</span>
                            </div>
                        {% endif %}

                        {% if app.session.has('cart') %}
                            {% if product['item'].id in app.session.get('cart').products|keys %}
                                {% set card_btn_cart = 'active js-cart' %}
                            {% else %}
                                {% set card_btn_cart = 'js-add-product' %}
                            {% endif %}
                        {% else %}
                            {% set card_btn_cart = 'js-add-product' %}
                        {% endif %}
                        <div class="card-buy">
                            <button class="buy-btn {{ card_btn_cart }}"
                                    data-url="{{ path('cart_add', {id: product['item'].id}) }}">
                                <i class="fas fa-shopping-cart"></i>
                                <span>Купить</span>
                            </button>
                        </div>
                        <div class="card-availability">
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>

    </div>
{% else %}
    <div class="user-container">
        <div class="wish-head">
            <h2>Товари в бажаному</h2>
        </div>

        <div class="body-info">
            <h1>Ви не додали жодного товару до «Бажаного». Ви можете додати товари в <a href="{{ path('catalog') }}">каталозi</a>.
            </h1>
        </div>
    </div>
{% endif %}

